{
  "type": "file",
  "name": "share-buttons.tsx",
  "path": "src/components/ui/share-buttons.tsx",
  "size": 3896,
  "sha": "9f4c799561d9a49d4921c11c893cf6f6dd6e93b1",
  "content": "\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Facebook, Link2, MessageSquare, Share2, Twitter } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ShareButtonsProps {\n  url: string;\n  title: string;\n  description?: string;\n}\n\nexport function ShareButtons({ url, title, description }: ShareButtonsProps) {\n  const [copied, setCopied] = useState(false);\n\n  const shareTwitter = () => {\n    window.open(\n      `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,\n      \"_blank\",\n      \"noopener,noreferrer\"\n    );\n  };\n\n  const shareReddit = () => {\n    window.open(\n      `https://reddit.com/submit?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`,\n      \"_blank\",\n      \"noopener,noreferrer\"\n    );\n  };\n\n  const shareFacebook = () => {\n    window.open(\n      `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,\n      \"_blank\",\n      \"noopener,noreferrer\"\n    );\n  };\n\n  const copyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(url);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {\n      // Fallback\n      const textarea = document.createElement(\"textarea\");\n      textarea.value = url;\n      document.body.appendChild(textarea);\n      textarea.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(textarea);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const nativeShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title,\n          text: description || title,\n          url,\n        });\n      } catch {\n        // User cancelled or error\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-1\">\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"h-8 w-8\"\n        onClick={shareTwitter}\n        title=\"Share on X/Twitter\"\n      >\n        <Twitter className=\"h-4 w-4\" />\n      </Button>\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"h-8 w-8\"\n        onClick={shareReddit}\n        title=\"Share on Reddit\"\n      >\n        <MessageSquare className=\"h-4 w-4\" />\n      </Button>\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"h-8 w-8\"\n        onClick={shareFacebook}\n        title=\"Share on Facebook\"\n      >\n        <Facebook className=\"h-4 w-4\" />\n      </Button>\n      <div className=\"relative\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-8 w-8\"\n          onClick={copyLink}\n          title=\"Copy link\"\n        >\n          <Link2 className=\"h-4 w-4\" />\n        </Button>\n        {copied && (\n          <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-foreground text-background text-xs px-2 py-1 rounded whitespace-nowrap\">\n            Copied!\n          </span>\n        )}\n      </div>\n      {/* Native share â€” only renders on client, feature-detected */}\n      <NativeShareButton title={title} description={description} url={url} onShare={nativeShare} />\n    </div>\n  );\n}\n\nfunction NativeShareButton({\n  onShare,\n}: {\n  title: string;\n  description?: string;\n  url: string;\n  onShare: () => void;\n}) {\n  const [supportsShare, setSupportsShare] = useState(false);\n\n  // Feature detect on mount using useEffect\n  React.useEffect(() => {\n    if (typeof navigator !== \"undefined\" && typeof navigator.share === \"function\") {\n      const isMobile = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n      if (isMobile) {\n        setSupportsShare(true);\n      }\n    }\n  }, []);\n\n  if (!supportsShare) return null;\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      className=\"h-8 w-8\"\n      onClick={onShare}\n      title=\"Share\"\n    >\n      <Share2 className=\"h-4 w-4\" />\n    </Button>\n  );\n}\n",
  "encoding": "base64",
  "downloadUrl": "https://raw.githubusercontent.com/onedollarbanana/FictionForge/feat/social-sharing/src/components/ui/share-buttons.tsx"
}
